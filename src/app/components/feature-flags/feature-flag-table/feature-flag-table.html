<div class="table-responsive custom-table custom-scroll table-compact">
    <table class="table table-hover mb-0">
        <thead class="bg-thead">
            <tr>
                <th style="width: 10%">ID</th>
                <th style="width: 25%">FLAG NAME</th>
                <th style="width: 15%">ENVIRONMENT</th>
                <th style="width: 20%">CREATED DATE</th>
                <th style="width: 15%">STATUS</th>
                <th style="width: 15%" class="text-end">TOGGLE</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let flag of flags">
                <td>
                    <span class="gray-badge custom-item-round">
                        {{ flag.id }}
                    </span>
                </td>
                <td>
                    <strong>{{ flag.name }}</strong>
                </td>
                <td>
                    <span class="custom-item-round" [ngClass]="{
                                    'bg-prime-light clr-prim': flag.environment === 'development',
                                    'bg-warning-light clr-warning': flag.environment === 'staging',
                                    'bg-success-light clr-success': flag.environment === 'production'
                                }">
                        {{ flag.environment | titlecase }}
                    </span>
                </td>
                <td>
                    <span class="text-muted small">
                        <i class="far fa-calendar-alt me-1"></i>
                        {{ flag.createdDate | date:'mediumDate' }}
                    </span>
                </td>
                <td>
                    <span class="custom-item-round"
                        [ngClass]="flag.status ? 'bg-success-light clr-success' : 'gray-badge'">
                        {{ flag.status ? 'Enabled' : 'Disabled' }}
                    </span>
                </td>
                <td class="text-end">
                    <div class="form-check form-switch d-inline-block">
                        <input class="form-check-input large-switch" type="checkbox" role="switch"
                            [checked]="flag.status" (change)="toggle.emit(flag)">
                    </div>
                </td>
            </tr>
            <tr *ngIf="flags.length === 0">
                <td colspan="6" class="text-center py-5 text-muted">
                    No feature flags found matching your criteria.
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-between align-items-center footer">
    <span class="fs-12 mute-clr">
        Showing {{ (page - 1) * pageSize + 1 }}-
        {{ mathMin(page * pageSize, totalItems) }}
        of {{ totalItems }} flags
    </span>
    <nav>
        <ul class="pagination custom-pagination mb-0">
            <li class="page-item" [class.disabled]="page === 1">
                <a class="page-link" (click)="pageChange.emit(page - 1)">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>
            <li class="page-item" *ngFor="let p of pageNumbers" [class.active]="p === page">
                <ng-container *ngIf="p !== '...'; else dots">
                    <a class="page-link" (click)="pageChange.emit($any(p))">{{ p }}</a>
                </ng-container>
                <ng-template #dots>
                    <span class="page-link disabled-ellipses">...</span>
                </ng-template>
            </li>
            <li class="page-item" [class.disabled]="page === totalPages">
                <a class="page-link" (click)="pageChange.emit(page + 1)">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>
</div>